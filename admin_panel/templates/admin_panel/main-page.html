{% extends 'lp/base.html' %}
{% load static %}

{% block content %}
{% include 'admin_panel/includes/admin-navbar.html' %}
<div class="container admin-panel-container mt-5">
    <h2 class="fw-light mb-4">Asosiy ma'lumotlar</h2>
    <div class="table-responsive">
        {% if information %}
            <table class="table fw-light">
                <thead>
                    <tr>
                        <th scope="col" style="width: 4%;">ID</th>
                        <th scope="col" style="width: 12%;">Brend logotipi</th>
                        <th scope="col" style="width: 12%;">Brend logo balandligi</th>
                        <th scope="col" style="width: 12%;">Sarlavha</th>
                        <th scope="col" style="width: 12%;">Mahsulot sarlavhasi</th>
                        <th scope="col" style="width: 12%;">Mahsulot tavfsifi</th>
                        <th scope="col" style="width: 12%;">Kompaniya rekvizitlari</th>
                        <th scope="col" style="width: 12%;">Futer matni</th>
                        <th scope="col" style="width: 12%;">Ijtimoiy tarmoqlar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for info in information %}
                        <tr>
                            <td style="width: 4%;">{{ info.id }}</td>
                            <td>
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Brend logotipi"
                                data-bs-content="{% get_file_name info.brand %}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">{{ info.brand_height }}</td>
                            <td style="width: 12%;">
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Sarlavha"
                                data-bs-content="{{ info.title }}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Mahsulot sarlavhasi"
                                data-bs-content="{{ info.product_title }}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Mahsulot haqida"
                                data-bs-content="{{ info.product_info }}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Kompaniya rekvizitlari"
                                data-bs-content="{{ info.company_requisities }}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">
                                <a class="popover-anchor"
                                tabindex="0"
                                type="button"
                                role="button" 
                                data-bs-toggle="popover"
                                data-bs-trigger="click"
                                data-bs-placement="top"
                                data-bs-title="Futer matni"
                                data-bs-content="{{ info.footer_motto }}">
                                    Ko'rish
                                </a>
                            </td>
                            <td style="width: 12%;">
                                {% for sm in info.media.all %}
                                    {{ sm.name }}<br>
                                {% endfor %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <h4 class="fw-light text-center mt-3 mb-5">Ma'lumotlar mavjud emas</h4>
        {% endif %}
    </div>
    <div class="text-center p-0 m-0 w-100">
        <a class="btn-delete"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#delete-mi-modal">
            O'chirish
        </a>
    </div>
    <div class="modal fade" tabindex="-1" id="delete-mi-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="fw-light mt-2 ms-2">
                        Asosiy ma'lumotlarni o'chirish uchun ularning ID raqamini kiriting
                    </h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="ms-2 me-2">
                        <label class="form-label text-start ms-1" for="info-id-for-deleting">
                            ID
                        </label>
                        <input class="register-input"
                        type="number"
                        placeholder="*"
                        id="info-id-for-deleting">
                        <p class="error fw-bold mb-0" id="info-id-for-deleting-error">
                            ID raqam noto'g'ri kiritildi!
                        </p>
                        <p class="error fw-bold mb-0" id="info-id-for-deleting-not-found-error">
                            Kiritilgan ID raqamga mos ma'lumotlar mavjud emas!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn-delete" id="btn-delete-info">
                        O'chirish
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5 mb-5">
    <div class="row admin-panel-row">
        <div class="col-xl">
            <h2 class="fw-light text-center mb-4">Asosiy ma'lumotlarni kiritish</h3>
            <form class="main-info-form" enctype="multipart/form-data" novalidate id="main-info-form">
                {% csrf_token %}
                <div class="main-info-input-div mb-3">
                    <label class="file-input-label" for="brand" id="brand-label">
                        <p class="mb-0" id="brand-p">Brend rasmi</p>
                        <img src="{% static 'icons/click.png' %}" height="25">
                        <input class="file-input"
                        type="file"
                        name="brand"
                        accept=".png, .jpg, .jpeg, .svg, .bmp"
                        id="brand">
                    </label>
                    <p class="error fw-light mb-0" id="brand-error">
                        Brend rasmi noto'g'ri kiritildi!(Mumkin formatlar: .png .jpg .jpeg .svg .bmp)
                    </p>
                </div>
                <div class="main-info-input-div mb-4">
                    <label class="form-label" for="brand-height">
                        Brend logotipi balandligi
                    </label>
                    <input class="register-input"
                    type="number"
                    name="brand_height"
                    placeholder="40"
                    id="brand-height">
                    <p class="error fw-light mb-0" id="brand-height-error">
                        Brend logotipi balandligi noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div mb-3">
                    <label class="form-label" for="title">
                        Sarlavha
                    </label>
                    <input class="register-input"
                    type="text"
                    name="title"
                    placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit..."
                    maxlength="200"
                    id="title">
                    <p class="error fw-light mb-0" id="title-error">
                        Sarlavha noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div mb-3">
                    <label class="form-label" for="product-title">
                        Mahsulot sarlavhasi
                    </label>
                    <input class="register-input"
                    type="text"
                    name="product_title"
                    placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit..."
                    maxlength="300"
                    id="product-title">
                    <p class="error fw-light mb-0" id="product-title-error">
                        Mahsulot sarlavhasi noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div pb-4 mb-3">
                    <label class="form-label" for="product-info">
                        Mahsulot haqida
                    </label>
                    <textarea class="register-input"
                    rows="5"
                    name="product_info"
                    placeholder="{% lorem %}"
                    id="product-info"></textarea>
                    <p class="error fw-light mb-0" id="product-info-error">
                        Mahsulot haqidagi ma'lumotlar noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div mb-4">
                    <label class="form-label" for="company-requisities">
                        Kompaniya rekvizitlari
                    </label>
                    <input class="register-input"
                    type="text"
                    name="company_requisities"
                    placeholder="......."
                    id="company-requisities">
                    <p class="error fw-light mb-0" id="company-requisities-error">
                        Kompaniya rekvizitlari noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div mb-3">
                    <label class="form-label" for="footer-motto">
                        Futer matni
                    </label>
                    <input class="register-input"
                    type="text"
                    name="footer_motto"
                    placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit..."
                    maxlength="150"
                    id="footer-motto">
                    <p class="error fw-light mb-0" id="footer-motto-error">
                        Futer matni noto'g'ri kiritildi!
                    </p>
                </div>
                <div class="main-info-input-div">
                    <label class="form-label" for="socialmedia">
                        Ijtimoiy tarmoqlar
                    </label>
                    <select class="register-input fw-light" 
                    multiple 
                    aria-label="Default select example" 
                    name="socialmedia" 
                    id="socialmedia">
                        {% for sm in media %}
                            <option class="select-option" value="{{ sm.id }}">{{ sm.name }}</option>
                        {% empty %}
                            <option value="none" selected>---</option>
                        {% endfor %}
                    </select>
                    <p class="error fw-light mb-0" id="social-media-error">
                        Ijtimoiy tarmoqlar tanlanmadi!
                    </p>
                </div>
                <div class="text-center p-0 m-0 w-100">
                    <button type="submit" class="btn-submit mt-4">
                        Kiritish
                    </button>
                </div>
            </form>
        </div>
        <div class="col-xl">
            <div class="html-output" id="product-info-output">
                <h3 class="text-center mb-0">Ma'lumotlar kiritilmagan</h3>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5">
    <h2 class="fw-light mb-4">Kurs uchun o'rinlar</h2>
    {% if places %}
        <div class="table-responsive">
            <table class="table fw-light">
                <thead>
                    <tr>
                        <th scope="col" style="width: 4%;">ID</th>
                        <th scope="col" style="width: 48%;">Umumiy o'rinlar soni</th>
                        <th scope="col" style="width: 48%;">Egallangan o'rinlar soni</th>
                    </tr>
                </thead>
                <tbody>
                    {% for place in places %}
                        <tr>
                            <td style="width: 4%;">
                                {{ place.id }}
                            </td>
                            <td style="width: 48%;">
                                {{ place.available_places }}
                            </td>
                            <td style="width: 48%;">
                                {{ place.booked_places }}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <h4 class="fw-light text-center mt-3 mb-5">Ma'lumotlar mavjud emas</h4>
    {% endif %}
    <div class="text-center p-0 m-0 w-100">
        <a class="btn-delete"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#delete-place-modal">
            O'chirish
        </a>
    </div>
    <div class="modal fade" tabindex="-1" id="delete-place-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="fw-light mt-2 ms-2">
                        Kurs uchun o'rinni o'chirish uchun uning ID raqamini kiriting
                    </h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="ms-2 me-2">
                        <label class="form-label text-start ms-1" for="place-id-for-deleting">
                            ID
                        </label>
                        <input class="register-input"
                        type="number"
                        placeholder="*"
                        id="place-id-for-deleting">
                        <p class="error fw-bold mb-0" id="place-id-for-deleting-error">
                            ID raqam noto'g'ri kiritildi!
                        </p>
                        <p class="error fw-bold mb-0" id="place-id-for-deleting-not-found-error">
                            Kiritilgan ID raqamga mos ma'lumotlar mavjud emas!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn-delete" id="btn-delete-place">
                        O'chirish
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5 mb-5">
    <h2 class="fw-light text-center mb-4">Kurs uchun o'rin kiritish</h3>
    <form class="main-info-form" enctype="multipart/form-data" novalidate id="places-form">
        {% csrf_token %}
        <div class="main-info-input-div mb-4">
            <label class="form-label" for="available-places">
                Umumiy o'rinlar soni
            </label>
            <input class="register-input"
            type="number"
            name="available_places"
            placeholder="*"
            maxlength="50"
            id="available-places">
            <p class="error fw-light mb-0" id="available-places-error">
                Umumiy o'rinlar soni noto'g'ri kiritildi!
            </p>
        </div>
        <div class="main-info-input-div mb-4">
            <label class="form-label" for="booked-places">
                Egallangan o'rinlar soni
            </label>
            <input class="register-input"
            type="number"
            name="booked_places"
            placeholder="*"
            maxlength="50"
            id="booked-places">
            <p class="error fw-light mb-0" id="booked-places-error">
                Egallangan o'rinlar soni noto'g'ri kiritildi!
            </p>
        </div>
        <div class="text-center p-0 m-0 w-100">
            <button type="submit" class="btn-submit mt-4">
                Kiritish
            </button>
        </div>
    </form>
</div>
<div class="container admin-panel-container mt-5">
    <h2 class="fw-light mb-4">Ijtimoiy tarmoqlar</h2>
    {% if media %}
        <div class="table-responsive">
            <table class="table fw-light">
                <thead>
                    <tr>
                        <th scope="col" style="width: 4%;">ID</th>
                        <th scope="col" style="width: 32%;">Nomi</th>
                        <th scope="col" style="width: 32%;">Belgi</th>
                        <th scope="col" style="width: 32%;">Havola</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sm in media %}
                        <tr>
                            <td style="width: 4%;">
                                {{ sm.id }}
                            </td>
                            <td style="width: 32%;">
                                {{ sm.name }}
                            </td>
                            <td style="width: 32%;">
                                {% get_file_name sm.icon %}
                            </td>
                            <td style="width: 32%;">
                                {{ sm.link }}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <h4 class="fw-light text-center mt-3 mb-5">Ma'lumotlar mavjud emas</h4>
    {% endif %}
    <div class="text-center p-0 m-0 w-100">
        <a class="btn-delete"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#delete-sm-modal">
            O'chirish
        </a>
    </div>
    <div class="modal fade" tabindex="-1" id="delete-sm-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="fw-light mt-2 ms-2">
                        Ijtimoiy tarmoqni o'chirish uchun uning ID raqamini kiriting
                    </h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="ms-2 me-2">
                        <label class="form-label text-start ms-1" for="sm-id-for-deleting">
                            ID
                        </label>
                        <input class="register-input"
                        type="number"
                        placeholder="*"
                        id="sm-id-for-deleting">
                        <p class="error fw-bold mb-0" id="sm-id-for-deleting-error">
                            ID raqam noto'g'ri kiritildi!
                        </p>
                        <p class="error fw-bold mb-0" id="sm-id-for-deleting-not-found-error">
                            Kiritilgan ID raqamga mos ma'lumotlar mavjud emas!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn-delete" id="btn-delete-sm">
                        O'chirish
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5 mb-5">
    <h2 class="fw-light text-center mb-4">Ijtimoiy tarmoq kiritish</h3>
    <form class="main-info-form" enctype="multipart/form-data" novalidate id="sm-form">
        {% csrf_token %}
        <div class="main-info-input-div mb-4">
            <label class="form-label" for="sm-name">
                Nomlanishi
            </label>
            <input class="register-input"
            type="text"
            name="name"
            placeholder="Gmail/Instagram/Telegram..."
            maxlength="50"
            id="sm-name">
            <p class="error fw-light mb-0" id="sm-name-error">
                Nomlanishi noto'g'ri kiritildi!
            </p>
        </div>
        <div class="main-info-input-div mb-3">
            <label class="file-input-label" for="sm-icon" id="sm-icon-label">
                <p class="mb-0" id="sm-icon-p">Belgi</p>
                <img src="{% static 'icons/click.png' %}" height="25">
                <input class="file-input"
                type="file"
                name="icon"
                accept=".png, .jpg, .jpeg, .svg, .bmp"
                id="sm-icon">
            </label>
            <p class="error fw-light mb-0" id="sm-icon-error">
                Belgi noto'g'ri kiritildi!(Mumkin formatlar: .png .jpg .jpeg .svg .bmp)
            </p>
        </div>
        <div class="main-info-input-div">
            <label class="form-label" for="sm-link">
                Havola
            </label>
            <input class="register-input"
            type="text"
            name="link"
            placeholder="----"
            maxlength="200"
            id="sm-link">
            <p class="error fw-light mb-0" id="sm-link-error">
                Havola noto'g'ri kiritildi!
            </p>
        </div>
        <div class="text-center p-0 m-0 w-100">
            <button type="submit" class="btn-submit mt-4">
                Kiritish
            </button>
        </div>
    </form>
</div>
<div class="container admin-panel-container mt-5">
    <h2 class="fw-light mb-4">Kitoblar</h2>
    {% if books %}
        <div class="table-responsive">
            <table class="table fw-light">
                <thead>
                    <tr>
                        <th scope="col" style="width: 4%;">ID</th>
                        <th scope="col" style="width: 48%;">Nomi</th>
                        <th scope="col" style="width: 48%;">Fayl</th>
                    </tr>
                </thead>
                <tbody>
                    {% for book in books %}
                        <tr>
                            <td style="width: 4%;">
                                {{ book.id }}
                            </td>
                            <td style="width: 48%;">
                                {{ book.name }}
                            </td>
                            <td style="width: 48%;">
                                {% get_file_name book.file %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <h4 class="fw-light text-center mt-3 mb-5">Ma'lumotlar mavjud emas</h4>
    {% endif %}
    <div class="text-center p-0 m-0 w-100">
        <a class="btn-delete"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#delete-book-modal">
            O'chirish
        </a>
    </div>
    <div class="modal fade" tabindex="-1" id="delete-book-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="fw-light mt-2 ms-2">
                        Kitobni o'chirish uchun uning ID raqamini kiriting
                    </h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="ms-2 me-2">
                        <label class="form-label text-start ms-1" for="book-id-for-deleting">
                            ID
                        </label>
                        <input class="register-input"
                        type="number"
                        placeholder="*"
                        id="book-id-for-deleting">
                        <p class="error fw-bold mb-0" id="book-id-for-deleting-error">
                            ID raqam noto'g'ri kiritildi!
                        </p>
                        <p class="error fw-bold mb-0" id="book-id-for-deleting-not-found-error">
                            Kiritilgan ID raqamga mos ma'lumotlar mavjud emas!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn-delete" id="btn-delete-book">
                        O'chirish
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5 mb-5">
    <h2 class="fw-light text-center mb-4">Kitob kiritish</h3>
    <form class="main-info-form" enctype="multipart/form-data" novalidate id="book-form">
        {% csrf_token %}
        <div class="main-info-input-div mb-4">
            <label class="form-label" for="book-name">
                Nomlanishi
            </label>
            <input class="register-input"
            type="text"
            name="name"
            placeholder="----"
            maxlength="50"
            id="book-name">
            <p class="error fw-light mb-0" id="book-name-error">
                Nomlanishi noto'g'ri kiritildi!
            </p>
        </div>
        <div class="main-info-input-div">
            <label class="file-input-label" for="book-file" id="book-file-label">
                <p class="mb-0" id="book-file-p">Kitob fayli</p>
                <img src="{% static 'icons/click.png' %}" height="25">
                <input class="file-input"
                type="file"
                name="file"
                accept=".pdf"
                id="book-file">
            </label>
            <p class="error fw-light mb-0" id="book-file-error">
                Fayl noto'g'ri kiritildi!(Mumkin formatlar: .pdf)
            </p>
        </div>
        <div class="text-center p-0 m-0 w-100">
            <button type="submit" class="btn-submit mt-4">
                Kiritish
            </button>
        </div>
    </form>
</div>
<div class="container admin-panel-container mt-5">
    <h2 class="fw-light mb-4">Tez-tez so'raladigan savollar</h2>
    {% if faq %}
        <div class="table-responsive">
            <table class="table fw-light">
                <thead>
                    <tr>
                        <th scope="col" style="width: 4%;">ID</th>
                        <th scope="col" style="width: 48%;">Savol</th>
                        <th scope="col" style="width: 48%;">Javob</th>
                    </tr>
                </thead>
                <tbody>
                    {% for question in faq %}
                        <tr>
                            <td style="width: 4%;">
                                {{ question.id }}
                            </td>
                            <td style="width: 48%;">
                                {{ question.question }}
                            </td>
                            <td style="width: 48%;">
                                {{ question.answer }}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <h4 class="fw-light text-center mt-3 mb-5">Ma'lumotlar mavjud emas</h4>
    {% endif %}
    <div class="text-center p-0 m-0 w-100">
        <a class="btn-delete"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#delete-faq-modal">
            O'chirish
        </a>
    </div>
    <div class="modal fade" tabindex="-1" id="delete-faq-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="fw-light mt-2 ms-2">
                        Tez-tez so'raladigan savollarni uchun ularning ID raqamini kiriting
                    </h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    <div class="ms-2 me-2">
                        <label class="form-label text-start ms-1" for="faq-id-for-deleting">
                            ID
                        </label>
                        <input class="register-input"
                        type="number"
                        placeholder="*"
                        id="faq-id-for-deleting">
                        <p class="error fw-bold mb-0" id="faq-id-for-deleting-error">
                            ID raqam noto'g'ri kiritildi!
                        </p>
                        <p class="error fw-bold mb-0" id="faq-id-for-deleting-not-found-error">
                            Kiritilgan ID raqamga mos ma'lumotlar mavjud emas!
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn-delete" id="btn-delete-faq">
                        O'chirish
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container admin-panel-container mt-5 mb-5">
    <h2 class="fw-light text-center mb-4">Tez-tez so'raladigan savol kiritish</h3>
    <form class="main-info-form" enctype="multipart/form-data" novalidate id="faq-form">
        {% csrf_token %}
        <div class="main-info-input-div mb-4">
            <label class="form-label" for="question">
                Savol
            </label>
            <input class="register-input"
            type="text"
            name="question"
            placeholder="----"
            maxlength="400"
            id="question">
            <p class="error fw-light mb-0" id="question-error">
                Savol noto'g'ri kiritildi!
            </p>
        </div>
        <div class="main-info-input-div">
            <label class="form-label" for="answer">
                Javob
            </label>
            <textarea class="register-input"
            rows="5"
            name="answer"
            placeholder="{% lorem %}"
            id="answer"></textarea>
            <p class="error fw-light mb-0" id="answer-error">
                Javob noto'g'ri kiritildi!
            </p>
        </div>
        <div class="text-center p-0 m-0 w-100">
            <button type="submit" class="btn-submit mt-4">
                Kiritish
            </button>
        </div>
    </form>
</div>
<div class="text-format-panel fixed-bottom">
    <p class="fw-light p-0 m-0">Text editor v1.1</p>
    <div class="format-buttons">
        <a type="button" class="format-button me-4" id="bold-text">
            <img src="{% static 'icons/bold.png' %}" height="15">
        </a>
        <a type="button" class="format-button me-4" id="italic-text">
            <img src="{% static 'icons/italic.png' %}" height="15">
        </a>
        <a type="button" class="format-button me-4" id="link-text">
            <img src="{% static 'icons/link.png' %}" height="15">
        </a>
        <a type="button" class="format-button me-4" id="check-img">
            <img src="{% static 'icons/check.png' %}" height="15">
        </a>
        <a type="button" class="format-button me-4" id="color-text">
            <img src="{% static 'icons/colors.png' %}" height="15">
        </a>
        <div class="dropup-center dropup">
            <a type="button" class="format-button me-4" data-bs-toggle="dropdown">
                <img src="{% static 'icons/headings.png' %}" height="15">
            </a>
            <ul class="dropdown-menu">
                <li type="button" class="dropdown-heading" id="heading-1">
                    H1
                </li>
                <li type="button" class="dropdown-heading" id="heading-2">
                    H2
                </li>
                <li type="button" class="dropdown-heading" id="heading-3">
                    H3
                </li>
                <li type="button" class="dropdown-heading" id="heading-4">
                    H4
                </li>
                <li type="button" class="dropdown-heading" id="heading-5">
                    H5
                </li>
                <li type="button" class="dropdown-heading" id="heading-6">
                    H6
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="modal fade" tabindex="-1" id="linkify-modal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="fw-light mt-2 ms-2">
                    Havolani kiriting
                </h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="ms-2 me-2">
                    <label class="form-label text-start ms-1" for="link-for-text">
                        Havola
                    </label>
                    <input class="register-input"
                    type="text"
                    placeholder="*"
                    id="link-for-text">
                    <p class="error fw-bold mb-0" id="link-for-text-error">
                        Havola noto'g'ri kiritildi!
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <a type="button" class="btn-submit" id="linkify-btn">
                    Kiritish
                </a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" tabindex="-1" id="colorify-modal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="fw-light mt-2 ms-2">
                    Rangni rgb/rgba/hash ko'rinishlarida kiritish mumkin
                </h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="ms-2 me-2">
                    <label class="form-label text-start ms-1" for="color-for-text">
                        Rang
                    </label>
                    <input class="register-input"
                    type="text"
                    placeholder="rgb(255, 255, 255)/rgba(255, 255, 255, 50%)/#ffffff"
                    id="color-for-text">
                </div>
            </div>
            <div class="modal-footer">
                <a type="button" class="btn-submit" id="colorify-btn">
                    Kiritish
                </a>
            </div>
        </div>
    </div>
</div>
<script>
    // Function-calls go here
    ChangeInputLabelOnInput('#book-file', 'book-file-p');
    ChangeInputLabelOnInput('#brand', 'brand-p');
    ChangeInputLabelOnInput('#sm-icon', 'sm-icon-p');

    // Event based functions go here
    $(document).ready(function () {
        const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]');
        const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl));
        NewLinify('product-info');
        NewLinify('answer');
    });
    $('#bold-text').on('click', function (e) {
        Boldify('title');
        Boldify('product-title');
        Boldify('product-info');
        Boldify('company-requisities');
        Boldify('footer-motto');
        Boldify('question');
        Boldify('answer');
    });
    $('#book-form').on('submit', function (e) {
        let check_data = [
            Valid('#book-name', '#book-name-error', "a-zA-Z0-9\\s:/\\+$!?_*-"),
            ValidateFileInput('#book-file', '#book-file-label', '#book-file-error', ['.pdf',]),
        ];
        if (check_data.includes(false)) {
            return false;
        } else {
            e.preventDefault();
            e.stopPropagation();
            let data = new FormData(this);
            PostMultipartData(
                '{% url "admin_panel:add-book" %}',
                'json',
                data,
                function (data) {
                    if (data.status === 'added') {
                        window.location.reload();
                    };
                },
                function (error) {
                    console.log('An error happened while POSTing the data!')
                },
            );
        };
    });
    $('#btn-delete-book').on('click', function (e) {
        let id_valid = Valid('#book-id-for-deleting', '#book-id-for-deleting-error', '0-9');
        if (id_valid) {
            GetData(
                '{% url "admin_panel:delete-book" %}',
                'json',
                {
                    id: $('#book-id-for-deleting').val(),
                },
                function (data) {
                    if (data.status === 'deleted') {
                        $('#book-id-for-deleting').css('border-color', '#000');
                        $('#book-id-for-deleting-not-found-error').css('display', 'none');
                        window.location.reload();
                    };
                },
                function (error) {
                    if (error.status === 404) {
                        $('#book-id-for-deleting').css('border-color', 'red');
                        $('#book-id-for-deleting-not-found-error').css('display', 'block');
                        console.log('Cannot find information with the id ' + String($('#book-id-for-deleting').val()) + '!');
                    };
                },
            );
        } else {
            return false;
        }
    });
    $('#btn-delete-faq').on('click', function (e) {
        let id_valid = Valid('#faq-id-for-deleting', '#faq-id-for-deleting-error', '0-9');
        if (id_valid) {
            GetData(
                '{% url "admin_panel:delete-faq" %}',
                'json',
                {
                    id: $('#faq-id-for-deleting').val(),
                },
                function (data) {
                    if (data.status === 'deleted') {
                        $('#faq-id-for-deleting').css('border-color', '#000');
                        $('#faq-id-for-deleting-not-found-error').css('display', 'none');
                        window.location.reload();
                    };
                },
                function (error) {
                    if (error.status === 404) {
                        $('#faq-id-for-deleting').css('border-color', 'red');
                        $('#faq-id-for-deleting-not-found-error').css('display', 'block');
                        console.log('Cannot find information with the id ' + String($('#faq-id-for-deleting').val()) + '!');
                    };
                },
            );
        } else {
            return false;
        }
    });
    $('#btn-delete-info').on('click', function (e) {
        let id_valid = Valid('#info-id-for-deleting', '#info-id-for-deleting-error', '0-9');
        if (id_valid) {
            GetData(
                '{% url "admin_panel:delete-main-information" %}',
                'json',
                {
                    id: $('#info-id-for-deleting').val(),
                },
                function (data) {
                    if (data.status === 'deleted') {
                        $('#info-id-for-deleting').css('border-color', '#000');
                        $('#info-id-for-deleting-not-found-error').css('display', 'none');
                        window.location.reload();
                    };
                },
                function (error) {
                    if (error.status === 404) {
                        $('#info-id-for-deleting').css('border-color', 'red');
                        $('#info-id-for-deleting-not-found-error').css('display', 'block');
                        console.log('Cannot find information with the id ' + String($('#info-id-for-deleting').val()) + '!');
                    };
                },
            );
        } else {
            return false;
        }
    });
    $('#btn-delete-place').on('click', function (e) {
        let id_valid = Valid('#place-id-for-deleting', '#place-id-for-deleting-error', '0-9');
        if (id_valid) {
            GetData(
                '{% url "admin_panel:delete-place" %}',
                'json',
                {
                    id: $('#place-id-for-deleting').val(),
                },
                function (data) {
                    if (data.status === 'deleted') {
                        $('#place-id-for-deleting').css('border-color', '#000');
                        $('#place-id-for-deleting-not-found-error').css('display', 'none');
                        window.location.reload();
                    };
                },
                function (error) {
                    if (error.status === 404) {
                        $('#place-id-for-deleting').css('border-color', 'red');
                        $('#place-id-for-deleting-not-found-error').css('display', 'block');
                        console.log('Cannot find information with the id ' + String($('#place-id-for-deleting').val()) + '!');
                    };
                },
            );
        } else {
            return false;
        }
    });
    $('#btn-delete-sm').on('click', function (e) {
        let id_valid = Valid('#sm-id-for-deleting', '#sm-id-for-deleting-error', '0-9');
        if (id_valid) {
            GetData(
                '{% url "admin_panel:delete-media" %}',
                'json',
                {
                    id: $('#sm-id-for-deleting').val(),
                },
                function (data) {
                    if (data.status === 'deleted') {
                        $('#sm-id-for-deleting').css('border-color', '#000');
                        $('#sm-id-for-deleting-not-found-error').css('display', 'none');
                        window.location.reload();
                    };
                },
                function (error) {
                    if (error.status === 404) {
                        $('#sm-id-for-deleting').css('border-color', 'red');
                        $('#sm-id-for-deleting-not-found-error').css('display', 'block');
                        console.log('Cannot find information with the id ' + String($('#sm-id-for-deleting').val()) + '!');
                    };
                },
            );
        } else {
            return false;
        }
    });
    $('#check-img').on('click', function (e) {
        Checkify('product-info');
    });
    $('#color-text').on('click', function (e) {
        $('#colorify-modal').modal({show: false});
        $('#colorify-modal').modal('show');
    });
    $('#colorify-btn').on('click', function (e) {
        $('#color-for-text').css('border-color', '#000');
        $('#color-for-text-error').css('display', 'none');
        $('#colorify-modal').modal('hide');
        Colorify('title', String($('#color-for-text').val()));
        Colorify('product-title', String($('#color-for-text').val()));
        Colorify('product-info', String($('#color-for-text').val()));
        Colorify('company-requisities', String($('#color-for-text').val()));
        Colorify('footer-motto', String($('#color-for-text').val()));
        Colorify('question', String($('#color-for-text').val()));
        Colorify('answer', String($('#color-for-text').val()));
        document.getElementById('color-for-text').value = '';
    });
    $('#faq-form').on('submit', function (e) {
        let check_data = [
            Valid('#question', '#question-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`"),
            Valid('#answer', '#answer-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`<>"),
        ];
        if (check_data.includes(false)) {
            return false;
        } else {
            e.preventDefault();
            e.stopPropagation();
            let data = new FormData(this);
            PostMultipartData(
                '{% url "admin_panel:add-faq" %}',
                'json',
                data,
                function (data) {
                    if (data.status === 'added') {
                        window.location.reload();
                    };
                },
                function (error) {
                    console.log('An error happened while POSTing the data!')
                },
            );
        };
    });
    $('#heading-1').on('click', function (e) {
        Headingify('product-info', 2);
    });
    $('#heading-2').on('click', function (e) {
        Headingify('product-info', 1.5);
    });
    $('#heading-3').on('click', function (e) {
        Headingify('product-info', 1.17);
    });
    $('#heading-4').on('click', function (e) {
        Headingify('product-info', 1);
    });
    $('#heading-5').on('click', function (e) {
        Headingify('product-info', 0.83);
    });
    $('#heading-6').on('click', function (e) {
        Headingify('product-info', 0.67);
    });
    $('#italic-text').on('click', function (e) {
        Italicize('title');
        Italicize('product-title');
        Italicize('product-info');
        Italicize('company-requisities');
        Italicize('footer-motto');
        Italicize('question');
        Italicize('answer');
    });
    $('#link-text').on('click', function (e) {
        $('#linkify-modal').modal({show: false});
        $('#linkify-modal').modal('show');
    });
    $('#linkify-btn').on('click', function (e) {
        let link_valid = Valid('#link-for-text', '#link-for-text-error', 'a-zA-Z0-9!@#$%&*-_+=:./\\\\');
        if (link_valid) {
            $('#link-for-text').css('border-color', '#000');
            $('#link-for-text-error').css('display', 'none');
            $('#linkify-modal').modal('hide');
            Linkify('title', String($('#link-for-text').val()));
            Linkify('product-title', String($('#link-for-text').val()));
            Linkify('product-info', String($('#link-for-text').val()));
            Linkify('company-requisities', String($('#link-for-text').val()));
            Linkify('footer-motto', String($('#link-for-text').val()));
            Linkify('question', String($('#link-for-text').val()));
            Linkify('answer', String($('#link-for-text').val()));
            document.getElementById('link-for-text').value = '';
        } else {
            $('#link-for-text').css('border-color', 'red');
            $('#link-for-text-error').css('display', 'block');
            return false;
        }
    });
    $('#main-info-form').on('submit', function (e) {
        let check_data = [
            ValidateFileInput('#brand', '#brand-label', '#brand-error', ['.png', '.jpg', '.jpeg', '.svg', '.bmp']),
            Valid('#brand-height', '#brand-height-error', '0-9.'),
            Valid('#title', '#title-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`"),
            Valid('#product-title', '#product-title-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`"),
            Valid('#product-info', '#product-info-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`<>"),
            Valid('#company-requisities', '#company-requisities-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`"),
            Valid('#footer-motto', '#footer-motto-error', "a-zA-Z0-9\\s!-?:\\/;%@_+=.,*()[\]'`"),
            ValidateSelectInput('#socialmedia', '#social-media-error'),
        ];
        if (check_data.includes(false)) {
            return false;
        } else {
            e.preventDefault();
            e.stopPropagation();
            let data = new FormData(this);
            PostMultipartData(
                '{% url "admin_panel:add-main-information" %}',
                'json',
                data,
                function (data) {
                    if (data.status === 'added') {
                        window.location.reload();
                    };
                },
                function (error) {
                    console.log('An error happened while POSTing the data!')
                },
            );
        }
    });
    $('#places-form').on('submit', function (e) {
        let check_data = [
            Valid('#available-places', '#available-places-error', '0-9'),
            Valid('#booked-places', '#booked-places-error', '0-9'),
        ];
        if (check_data.includes(false)) {
            return false;
        } else {
            e.preventDefault();
            e.stopPropagation();
            let data = new FormData(this);
            PostMultipartData(
                '{% url "admin_panel:add-place" %}',
                'json',
                data,
                function (data) {
                    if (data.status === 'added') {
                        window.location.reload();
                    };
                },
                function (error) {
                    console.log('An error happened while POSTing the data!')
                },
            );
        }
    });
    $('#product-info').on('keyup', function (e) {
        if ($(this).val()) {
            $('#product-info-output').html($(this).val());
        } else {
            $('#product-info-output').html(`<h3 class="text-center mb-0">Ma'lumotlar kiritilmagan</h3>`)
        };
    });
    $('#sm-form').on('submit', function (e) {
        let check_data = [
            Valid('#sm-name', '#sm-name-error', "a-zA-Z0-9\s_`'-"),
            ValidateFileInput('#sm-icon', '#sm-icon-label', '#sm-icon-error', ['.png', '.jpg', '.jpeg', '.svg', '.bmp']),
        ];
        if (check_data.includes(false)) {
            return false;
        } else {
            e.preventDefault();
            e.stopPropagation();
            let data = new FormData(this);
            PostMultipartData(
                '{% url "admin_panel:add-media" %}',
                'json',
                data,
                function (data) {
                    if (data.status === 'added') {
                        window.location.reload();
                    };
                },
                function (error) {
                    console.log('An error happened while POSTing the data!')
                },
            );
        }
    });

    // Functions/methods go here
    function Boldify(element) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart < field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let selectedText = field.value.substring(startPos, endPos).trim();
            let output = String(oldValue.slice(0, startPos)) + '**' + selectedText + '**' + String(oldValue.slice(endPos));
            field.value = output;
        };
    };

    function ChangeInputLabelOnInput(field, label) {
        $(field).on('input', function (e) {
            let file = $(this).val().split("\\");
            document.getElementById(label).innerText = file.slice(-1);
        });
    };

    function Checkify(element) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart === field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let output1 = String(oldValue.slice(0, startPos)); 
            let output2 = `<img src="{% static 'icons/check.png' %}" height="20">`;
            let output3 = String(oldValue.slice(endPos));
            field.value = output1 + output2 + output3;
        };
    };

    function Colorify(element, color) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart < field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let selectedText = field.value.substring(startPos, endPos).trim();
            let output1 = String(oldValue.slice(0, startPos)) + '<span style="color: ' + color +'">';
            let output2 = selectedText + '</span>' + String(oldValue.slice(endPos));
            field.value = output1 + output2;
            field.selectionStart = endPos + 7;
            field.selectionEnd = endPos + 7;
        };
    };

    function GetData(url, dataType, input, on_success, on_error) {
        jQuery.ajax({
            url: url,
            type: 'GET',
            dataType: dataType,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
            },
            data: input,
            success: function (data) {
                on_success(data);
            },
            error: function (error) {
                on_error(error);
            },
        });
    };

    function Headingify(element, size) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart < field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let selectedText = field.value.substring(startPos, endPos).trim();
            let output1 = String(oldValue.slice(0, startPos));
            let output2 = '<span style="font-size: ' + size + 'em;">' + selectedText + '</span>';
            let output3 = String(oldValue.slice(endPos));
            field.value = output1 + output2 + output3;
            field.selectionStart = endPos + 10;
            field.selectionEnd = endPos + 10;
        };
    };

    function Italicize(element) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart < field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let selectedText = field.value.substring(startPos, endPos).trim();
            let output = String(oldValue.slice(0, startPos)) + '_' + selectedText + '_' + String(oldValue.slice(endPos));
            field.value = output;
            field.selectionStart = endPos + 1;
            field.selectionEnd = endPos + 1;
        };
    };

    function Linkify(element, url) {
        let field = document.getElementById(element);
        let oldValue = field.value;
        if (
                field.value && 
                field.selectionStart !== undefined && 
                field.selectionStart < field.selectionEnd
        ) {
            let startPos = field.selectionStart;
            let endPos = field.selectionEnd;
            let selectedText = field.value.substring(startPos, endPos).trim();
            let output1 = String(oldValue.slice(0, startPos)) + '[' + selectedText + ']';
            let output2 = '(' + String(url) + ')' + String(oldValue.slice(endPos));
            field.value = output1 + output2;
            field.selectionStart = endPos + url.length + 1;
            field.selectionEnd = endPos + url.length + 1;
        };
    };

    function NewLinify(element) {
        $('#' + element).on('keypress', event => {
            let field = document.getElementById(element);
            let oldValue = field.value;
            if (event.keyCode === 13) {
                event.preventDefault();
                if (
                        field.value && 
                        field.selectionStart !== undefined && 
                        field.selectionStart === field.selectionEnd
                ) {
                    let startPos = field.selectionStart;
                    let endPos = field.selectionEnd;
                    let output = String(oldValue.slice(0, startPos)) + '<br/>' + String(oldValue.slice(endPos));
                    field.value = output;
                    field.selectionStart = startPos + 5;
                    field.selectionEnd = startPos + 5;
                };
            };
        });
    };

    function PostMultipartData(url, dataType, input, on_success, on_error) {
        jQuery.ajax({
            url: url,
            type: 'POST',
            dataType: dataType,
            cache: false,
            contentType: false,
            processData: false,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
            },
            data: input,
            success: function (data) {
                on_success(data);
            },
            error: function (error) {
                on_error(error);
            },
        });
    };

    function Valid(field, error, allowed) {
        let value = $(field).val();
        let not_allowed = RegExp("[^" + allowed + "]");
        if (value && is_space_only(value) === false && not_allowed.test(value) === false) {
            $(field).css('border-color', '#000');
            $(error).css('display', 'none');
            return true;
        } else {
            $(field).css('border-color', 'red');
            $(error).css('display', 'block');
            return false;
        };
    };

    function ValidateFileInput(field, label, error, allowed_formats) {
        // The full path is C:\fakepath\file_name.xxx
        let img = $(field).val().split('\\').slice(-1);
        let invalid;
        for (let i = 0; i < allowed_formats.length; i++) {
            if ($(field).val() && String(img).toLowerCase().endsWith(allowed_formats[i])) {
                $(label).css('border-color', '#000');
                $(error).css('display', 'none');
                return true;
            } else {
                invalid = true;
            };
        };
        $(label).css('border-color', 'red');
        $(error).css('display', 'block');
        return false;
    };

    function ValidateSelectInput(field, error) {
        let selected = document.getElementById(field.replace('#', '')).selectedOptions;
        if (selected !== null && selected !== undefined && selected.length > 0 && selectedElementNotEmpty(selected)) {
            $(field).css('border-color', '#000');
            $(error).css('display', 'none');
            return true;
        } else {
            $(field).css('border-color', 'red');
            $(error).css('display', 'block');
            return false;
        };
    };

    function is_space_only(string) {
        return /^\s+$/.test(string);
    };

    function selectedElementNotEmpty(array) {
        let result;
        for (let i = 0; i < array.length; i++) {
            let arg = array[i];
            if (arg && arg.value !== 'none') {
                result = true;
            } else {
                result = false;
            };
        };
        return result;
    };
</script>
{% endblock content %}